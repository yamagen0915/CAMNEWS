<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Parser</title>
	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
  <style>
    .layout {
      width: 100%;
      max-width: 620px;
      margin: 0px auto;
    }
  
    .pure-form input {
      width: 100%;
    }

  </style>

  <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script>
    $(document).ready(function(){
      
    });

    $(document).on('click', '.pure-form input[type="submit"]', function(){
      var str = $("#parse-str").val();
			var char_count = 0;
			for (var i = 0; i < str.length; i++) {

				// 全角は1文字分、半角なら0.5文字分としてカウントする。
				var c				= str.charAt(i);
				char_count += char_width(c);
			}
      console.log(str.length);
      console.log(char_count);
    });

		function char_width (c) {
			if (c.match(/[a-z0-9]/)) return 0.4;
			if (c.match(/[A-Z]/))		 return 0.4;
			if (c.match(/[”]/))			 return 0.4;
			if (c.match(/[\.]/))			 return 0.3;
			if (c.match(/[:(){}!?]\s/)) return 0.2;
			return 1;
		}
  </script>
</head>
<body>
  <div class="layout">
    <div class="pure-form">
      <input type="text" id="parse-str" >
      <input type="submit" value="変換" class="pure-button pure-button-primary">
    </div>
    <div id="output"></div>
  </div>
</body>
</html>
